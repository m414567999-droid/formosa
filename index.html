<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formosa | Weather Portal</title>
    <style>
        /* --- PAGE LAYOUT --- */
        body {
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background: #121212; /* Darker theme for a modern look */
            color: #eee;
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 0;
            padding: 20px;
            cursor: pointer; /* Hint that the page is interactive */
        }

        /* --- IMAGE STYLING --- */
        .header-image {
            max-width: 1440px;
            width: 100%;
            height: auto;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            margin-bottom: 30px;
            transition: transform 0.3s ease;
        }
        
        body:hover .header-image {
            transform: scale(1.01);
        }

        /* --- WIDGET STYLING --- */
        .widget-container {
            background: linear-gradient(135deg, #1e3c72, #2a5298); 
            color: white;
            width: 100%;
            max-width: 1440px; 
            border-radius: 16px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.4);
            overflow: hidden;
        }

        /* Top Section: Current Weather */
        .widget-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 40px 60px;
            background: rgba(255, 255, 255, 0.05);
        }

        .location-info h2 { 
            margin: 0; 
            font-size: 3rem; 
            text-transform: uppercase; 
            letter-spacing: 4px;
        }
        
        .weather-desc {
            font-weight: 300;
            opacity: 0.7;
            font-size: 0.6em;
            margin-left: 20px;
            vertical-align: middle;
        }

        .location-info p { margin: 10px 0 0; opacity: 0.6; font-size: 1rem; letter-spacing: 1px; }
        
        .current-temp { font-size: 5rem; font-weight: 200; }

        /* Bottom Section: 7-Day Forecast */
        .forecast-row {
            display: flex;
            justify-content: space-between;
            padding: 30px 20px;
            background: rgba(0,0,0,0.2);
        }

        .day-card {
            text-align: center;
            flex: 1; 
            padding: 15px 10px;
            transition: background 0.2s ease;
            border-radius: 10px;
        }
        .day-card:hover {
            background: rgba(255,255,255,0.1);
        }

        .day-name { font-size: 1rem; text-transform: uppercase; opacity: 0.8; margin-bottom: 15px; display: block; }
        .day-icon { font-size: 3rem; margin: 15px 0; display: block; }
        .day-temp { font-size: 1.5rem; font-weight: 600; }
        .day-temp .low { opacity: 0.5; font-size: 1.1rem; margin-left: 10px; font-weight: 400; }

        .status-msg { padding: 100px; text-align: center; font-size: 1.5rem; color: #aaa; }
    </style>
</head>
<body>

    <img src="2026Horse.jpg" alt="2026 Horse" class="header-image">

    <div class="widget-container" id="weather-widget">
        <div class="status-msg">Initialising Weather Data...</div>
    </div>

    <script>
        // --- REDIRECT LOGIC ---
        // This handles the "any click on the page" requirement
        document.addEventListener('click', function() {
            window.location.href = 'cyber.html';
        });

        // --- CONFIGURATION ---
        const LOCATION = { lat: -27.4705, lon: 153.0260, name: "BRISBANE" };

        function getWeatherDesc(code) {
            const codes = {
                0: "Clear Sky", 1: "Mainly Clear", 2: "Partly Cloudy", 3: "Overcast",
                45: "Fog", 48: "Rime Fog", 51: "Light Drizzle", 53: "Moderate Drizzle",
                55: "Dense Drizzle", 61: "Slight Rain", 63: "Moderate Rain", 65: "Heavy Rain",
                80: "Slight Showers", 81: "Moderate Showers", 82: "Violent Showers",
                95: "Thunderstorm", 96: "Thunderstorm + Hail", 99: "Heavy Hail"
            };
            return codes[code] || "Variable";
        }

        function getIcon(code) {
            if (code === 0) return "‚òÄÔ∏è"; 
            if (code >= 1 && code <= 3) return "‚õÖ"; 
            if (code >= 45 && code <= 48) return "üå´Ô∏è"; 
            if (code >= 51 && code <= 67) return "üåßÔ∏è"; 
            if (code >= 71 && code <= 77) return "‚ùÑÔ∏è"; 
            if (code >= 80 && code <= 82) return "üå¶Ô∏è"; 
            if (code >= 95) return "‚õàÔ∏è"; 
            return "‚òÅÔ∏è";
        }

        function getDayName(dateString) {
            return new Date(dateString).toLocaleDateString('en-US', { weekday: 'short' }); 
        }

        async function fetchWeather() {
            const url = `https://api.open-meteo.com/v1/forecast?latitude=${LOCATION.lat}&longitude=${LOCATION.lon}&current_weather=true&daily=weathercode,temperature_2m_max,temperature_2m_min&timezone=auto`;
            try {
                const response = await fetch(url);
                const data = await response.json();
                renderWidget(data);
            } catch (e) {
                document.getElementById('weather-widget').innerHTML = `<div class="status-msg">System Offline: Check API Connection.</div>`;
            }
        }

        function renderWidget(data) {
            const current = data.current_weather;
            const daily = data.daily;
            
            let forecastHTML = '';
            for(let i = 0; i < 7; i++) {
                forecastHTML += `
                    <div class="day-card">
                        <span class="day-name">${getDayName(daily.time[i])}</span>
                        <span class="day-icon">${getIcon(daily.weathercode[i])}</span>
                        <span class="day-temp">
                            ${Math.round(daily.temperature_2m_max[i])}¬∞
                            <span class="low">${Math.round(daily.temperature_2m_min[i])}¬∞</span>
                        </span>
                    </div>`;
            }

            document.getElementById('weather-widget').innerHTML = `
                <div class="widget-header">
                    <div class="location-info">
                        <h2>${LOCATION.name}<span class="weather-desc">/ ${getWeatherDesc(current.weathercode)}</span></h2>
                        <p>STATION_STATUS: ACTIVE</p>
                    </div>
                    <div class="current-temp">${Math.round(current.temperature)}¬∞C</div>
                </div>
                <div class="forecast-row">${forecastHTML}</div>`;
        }

        window.onload = fetchWeather;
    </script>
</body>
</html>
